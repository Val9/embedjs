<!DOCTYPE html>
<html>
	<head>
		<title>EmbedJS Test Runner</title>
		<script type="text/javascript" src="../require.js"></script>
		<style type="text/css">
			a {
				display: block;
				color: #000000;
			}
			#results h1 {
				font-size: 14px;
				margin: 0;
				padding: 0;
			}
			#results h1 a {
				padding: 5px;
				text-decoration: none;
			}
			#results .groupResults {
				border: solid 1px #808080;
				margin-bottom: 10px;
			}
			#results .passed h1 {
				background: #80FF9F;
			}
			#results .failed h1 {
				background: #FF3F3F;
			}
			#results .inner {
				padding: 5px 10px;
			}
			#results .groupResults .passed {
				color: #077F00;
			}
			#results .groupResults .failed a {
				color: #FF3F3F;
			}
			
			/* toggle details */
			.inner {
				display: none;
			}
			.showDetails .inner,
			.summary .inner {
				display: block;
			}
			.showDetails h1,
			.summary h1 {
				border-bottom: solid 1px #808080;
			}
			
			
			/* messages */
			#results .messages {
				margin: 5px 3px;
				border-left: dotted 2px #808080;
				padding-left: 10px;
				font-size: 10px;
				color: #404040;
				display: none;
			}
			#results .showMessages {
				display: block;
			}
			
			#testBoxContainer {
				height: 0;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
	    <script type="text/javascript">
	    	function runTests(){
				var select = document.getElementById('target-platform');
				var target = select.options[select.selectedIndex].value;
				var targetModule = "dojo/_platforms/" + target;

				document.body.removeChild(document.getElementById('targetSelector'));

				require(["dojo"]);
				require.ready(function(){
					
					require(["dojo/_features/dojo-kitchen-sink", targetModule]);

					require.ready(function(){
						require(["modules.js"]);
					});

				});


		    }

		    function runReadyTest(){
				var select = document.getElementById('target-platform');
				var target = select.options[select.selectedIndex].value;
				var targetModule = "dojo/_platforms/" + target;

				location.href = "./readyTest.html?platform="+targetModule;

			}

			function toggleInner(group){
				dojo.toggleClass(group, 'showDetails');
			}

			function showMessages(id){
				dojo.toggleClass(id, 'showMessages');
			}
	    </script>
	    
	    
	    <div id="targetSelector">
		    <select id="target-platform">
		    	<option value="webkit-mobile">WebKit</option>
		    	<option value="opera">Opera</option>
		    </select>
		    <br />
		    <button onclick="runTests();">run tests for selected platform</button>
		    <button onclick="runReadyTest();">run ready() test for selected platform</button>
	    </div>
	    
	    <pre id="results"></pre>
	    
	    <div id="testBoxContainer"></div>
	    
	</body>
</html>

